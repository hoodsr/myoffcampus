<!--View Information-->
<!--View name : addreview-->
<!--Controller name : addReviewCtrl-->
<!--Controller path : www/templates/reviews/controllers.js-->
<!--State name : app.addreview-->
<!--URL : #app/addreview-->

<ion-view view-title="Add a Review">
  <!--left button on navigation bar-->
  <ion-nav-buttons side="left">
    <a ng-click="navigateTo('app.locationDetails', property)" class="button back-button buttons button-clear header-item nav-back-btn">
      <i class="ion-android-arrow-back"></i>
    </a>
  </ion-nav-buttons>
  <!--end left button on navigation bar-->

  <!--add review content-->
  <ion-content id="social-sign-up-content">
    <br/>
    <form name="reviewForm" novalidate="">
      <div class="input" style="border: none; padding: 0; ">
        <i class="ion-ios-calendar-outline" style="font-size: 16px; padding-right: 3px;"></i>
        {{review.createDate}}
      </div>
      <br />

      <!--overall rating-->
      <div class="input" style="border: none; padding: 0; padding-top: 10px;">
        Rate housing from a scale 1 to 10.
      </div>
      <div class="item range range-positive" style="border: none">
        <md-slider flex type="number" min="1" max="10" ng-model="review.overallRating" aria-label="overallRating">
        </md-slider> 
        <span id ="slider" ng-class="{red:review.overallRating<4, green:review.overallRating>6, yellow:review.overallRating>3 && review.overallRating<7}"> {{review.overallRating}}</span>
      </div>

      <!--cost-->
      <label class="item item-input" ng-class="{ 'has-errors' : reviewForm.cost.$invalid && reviewForm.$submitted, 'no-errors' : reviewForm.cost.$valid  && reviewForm.$submitted}">
        <input type="text" placeholder="Cost" name="cost" ng-model="review.cost">
      </label>

      <div class="error-container last-error-container" ng-show="reviewForm.cost.$error && reviewForm.$submitted" ng-messages="reviewForm.cost.$error">
        <div ng-messages-include="error-list.html"></div> 
      </div> 
      <br />

      <!--main review text-->
      <textarea style="resize: vertical;" rows="5" ng-model="review.text" required maxlength="750" name="text" placeholder="Any additional comments"></textarea>
        <div id="main-review">
          {{(review.text.length > 0 ? review.text.length :0) | json}}/750
        </div>
      
      <div class="error-container last-error-container" ng-show="reviewForm.text.$error && reviewForm.$submitted" ng-messages="reviewForm.text.$error">
          <div ng-messages-include="error-list.html"></div> 
      </div>

      <!--submit-->
      <a class="md-raised social-button md-button md-default-theme material-background" ng-click="reviewForm.$submitted = true; addReview(reviewForm)" >Submit</a>
    </form>
  </ion-content>
  <!--end add review content-->

  <!--form error messages-->
  <script id="error-list.html" type="text/ng-template">  
    <div class="error" ng-message="required">
      This is required
    </div>
  </script>
  <!--end form error messages-->
</ion-view>
